### Генератор

Генератор это подвид итерируемых объектов, это последовательность значений, которую можно перебрать.
Эту последовательность можно использовать для итерации в цикле, но нельзя проиндексировать (т. е., перебрать ее можно только один раз).

Простой генератор:
```python
def gen_simple(a):  
    for i in range(a):  
        yield i

gen1 = gen_simple(5)
list(gen1)  # [0, 1, 2, 3, 4]
next(gen1)  # Exception: StopIteration

gen2 = gen_simple(5)
next(gen2)  # 0
next(gen2)  # 1
gen2.close()
next(gen2)  # Exception: StopIteration
```

Методы генератора:

- `.send(value)` (только у генераторов с функцией next) - позволяет передавать данные в генератор, изменяя его поведение. Этот метод возобновляет код генератора, а выражение `yield` возвращает указанное значение value. Если вызывается обычный метод `__next__()`, то `yield` возвращает `None`.
- `.throw(type, value=None, traceback=None)` используется для вызова исключения внутри генератора. Исключение вызывает выражение `yield`, где выполнение генератора приостановлено.
- `.close()` вызывает исключение GeneratorExit внутри генератора, чтобы завершить итерацию. При получении этого исключения код генератора должен либо вызвать `GeneratorExit`, либо `StopIteration`. Перехват исключения и выполнение чего-либо еще недопустимо и вызовет исключение `RuntimeError`. Метод `.close()` также будет вызываться сборщиком мусора в Python.

>Генератору в каждый момент времени нужно удерживать в памяти только одно значение. Таким образом, нет никаких ограничений памяти.

>Генератор может содержать больше одного ключевого слова `yield`
### Списковое включение и генераторные выражения

**Генераторное выражение** или **абстракция** - это конструкторы, позволяющие создавать последовательности из других последовательностей.

**Списковое включение** - разновидность генераторного выражения, где конечная последовательность – список.

Пример использования генераторных выражений: 
```python
data = (  
    ("key1", "value1"),  
    ("key2", "value2"),  
    ("key3", "value2"),  
)  
listcomp = [value for key, value in data if key != "key1"]  # Списковое включение
setcomp = {value for key, value in data if key != "key1"}  # Абстракция множества
dictcomp = {key: value for key, value in data if key != "key1"}  # Абстракция словаря
genexp = (value for key, value in data if key != "key1")  # Генераторное выражение
print(listcomp, setcomp, dictcomp, genexp, sep="\n")  
# ['value2', 'value2']  
# {'value2'}  
# {'key2': 'value2', 'key3': 'value2'}  
# <generator object <genexpr> at 0x000001BA616BF6B0>  
for item in genexp:  
    print(item, end=" ")  
# value2 value2
```